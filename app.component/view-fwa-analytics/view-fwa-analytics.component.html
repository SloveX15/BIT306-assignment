<br>
<br>
<br>
<br>
<h2>View FWA Analytics</h2>

<div *ngIf="departmentData.length > 0">
  <h3>FWA status for each department.:</h3>
  <table>
    <thead>
      <tr>
        <th>Department Name</th>
        <th>Flexi Hours</th>
        <th>Work From Home</th>
        <th>Hybrid</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of departmentData">
        <td>{{ data.deptName}}</td>
        <td>{{ data.flexiHours}}</td>
        <td>{{ data.workFromHome }}</td>
        <td>{{ data.hybrid }}</td>
      </tr>
    </tbody>
  </table>
</div>
<br>
<br>
<!-- Select department -->
<div>
  <label for="department-select">Select Department:</label>
  <select id="department-select" [(ngModel)]="selectedDepartment">
    <option *ngFor="let dept of departmentData" [value]="dept.deptID">{{ dept.deptName }}</option>
  </select>
  <button (click)="viewDetails()">View Details</button>
</div>

<!-- Select date range -->
<div *ngIf="showDetails">
  <table>
    <thead>
      <tr>
        <th>Date</th>
        <th>Total Requests</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let key of dateKeys">
        <td>{{ key }}</td>
        <td>{{ dateCounts[key] }}</td>
      </tr>
    </tbody>
  </table>

  <label for="start-date">Start Date:</label>
  <input type="date" id="start-date" [(ngModel)]="startDate">
  <label for="end-date">End Date:</label>
  <input type="date" id="end-date" [(ngModel)]="endDate">
  <button (click)="viewSchedule()">View Schedule</button>
</div>

<!-- Show schedule data -->
<div *ngIf="filteredScheduleData.length > 0 && showSchedule">
  <h3>Schedule Data:</h3>
  <table>
    <thead>
      <tr>
        <th>Date</th>
        <th>Employee ID</th>
        <th>Work Location</th>
        <th>Work Hours</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of scheduleData">
        <td>{{ data.date | date }}</td>
        <td>{{ data.employeeID }}</td>
        <td>{{ data.workLocation }}</td>
        <td>{{ data.workHours }}</td>
      </tr>
    </tbody>
  </table>
</div>

<p class="info-text mat-body-1" *ngIf="scheduleData.length == 0">No Schedule added yet </p>

